<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>T·∫°o DNS iOS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    font-family:-apple-system,BlinkMacSystemFont;
    background:#0f172a;
    color:white;
    padding:20px
}
.box{
    max-width:420px;
    margin:auto;
    background:#020617;
    padding:20px;
    border-radius:14px;
    box-shadow:0 0 25px rgba(0,0,0,.6)
}
h2{text-align:center}
input,textarea,button{
    width:100%;
    margin-top:10px;
    padding:12px;
    border-radius:10px;
    border:none;
    font-size:15px
}
input,textarea{
    background:#0f172a;
    color:white;
    border:1px solid #334155
}
textarea{resize:vertical}
button{
    background:#22c55e;
    color:black;
    font-weight:bold;
    cursor:pointer
}
small{opacity:.7}
</style>
</head>
<body>

<div class="box">
<h2>‚öôÔ∏è T·∫†O DNS iOS</h2>

<input id="name" placeholder="T√™n c·∫•u h√¨nh (hi·ªÉn th·ªã ch√≠nh)">
<input id="desc" placeholder="M√¥ t·∫£ n·∫±m d∆∞·ªõi t√™n (tu·ª≥ ch·ªânh)">

<textarea id="dns" rows="4"
placeholder="Nh·∫≠p DNS (m·ªói d√≤ng 1 DNS)
VD:
1.1.1.1
8.8.8.8"></textarea>

<textarea id="notify" rows="3"
placeholder="Th√¥ng b√°o ch·∫•p thu·∫≠n khi c√†i DNS
VD: H·ªì s∆° n√†y s·∫Ω thay ƒë·ªïi c√†i ƒë·∫∑t m·∫°ng tr√™n thi·∫øt b·ªã"></textarea>

<button onclick="createProfile()">üì• T·∫°o & T·∫£i DNS iOS</button>

<small>‚Ä¢ H·ªó tr·ª£ 1 ho·∫∑c nhi·ªÅu DNS<br>‚Ä¢ C√†i tr·ª±c ti·∫øp tr√™n iOS</small>
</div>

<script>
function createProfile(){
    const name = document.getElementById("name").value || "DNS iOS";
    const desc = document.getElementById("desc").value || "";
    const notify = document.getElementById("notify").value || "";
    const dnsLines = document.getElementById("dns").value
        .split("\n")
        .map(d => d.trim())
        .filter(d => d);

    if(dnsLines.length === 0){
        alert("B·∫°n ch∆∞a nh·∫≠p DNS!");
        return;
    }

    const uuid = crypto.randomUUID();
    let dnsXML = "";
    dnsLines.forEach(d=>{
        dnsXML += `<string>${d}</string>\n`;
    });

const profile = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>PayloadContent</key>
<array>
<dict>
<key>DNSSettings</key>
<dict>
<key>ServerAddresses</key>
<array>
${dnsXML}
</array>
</dict>
<key>PayloadType</key>
<string>com.apple.dnsSettings.managed</string>
<key>PayloadVersion</key>
<integer>1</integer>
<key>PayloadIdentifier</key>
<string>dns.${uuid}</string>
<key>PayloadUUID</key>
<string>${uuid}</string>
<key>PayloadDisplayName</key>
<string>${name}</string>
<key>PayloadDescription</key>
<string>${desc}</string>
</dict>
</array>

<key>PayloadType</key>
<string>Configuration</string>
<key>PayloadVersion</key>
<integer>1</integer>
<key>PayloadIdentifier</key>
<string>config.${uuid}</string>
<key>PayloadUUID</key>
<string>${uuid}</string>
<key>PayloadDisplayName</key>
<string>${name}</string>
<key>PayloadDescription</key>
<string>${notify}</string>
</dict>
</plist>`;

    const blob = new Blob([profile],{type:"application/x-apple-aspen-config"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "DNS-iOS.mobileconfig";
    a.click();
}
</script>

</body>
</html>
